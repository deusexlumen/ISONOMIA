<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ISONOMIA | Die Reise</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            overflow: hidden;
            background: #000;
            font-family: 'Cinzel', 'Times New Roman', serif;
            cursor: crosshair;
        }

        #canvas-container {
            position: fixed;
            inset: 0;
            z-index: 1;
        }

        /* Immersive UI Layer */
        #ui-layer {
            position: fixed;
            inset: 0;
            z-index: 10;
            pointer-events: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Floating Text in 3D Space (simuliert) */
        .station-text {
            position: absolute;
            text-align: center;
            color: #fff;
            opacity: 0;
            transform: scale(0.8);
            transition: all 1s cubic-bezier(0.16, 1, 0.3, 1);
            max-width: 600px;
            padding: 2rem;
            pointer-events: auto;
        }

        .station-text.active {
            opacity: 1;
            transform: scale(1);
        }

        .station-text h1 {
            font-size: clamp(2rem, 5vw, 4rem);
            margin-bottom: 1.5rem;
            text-shadow: 0 0 60px rgba(0, 245, 212, 0.5);
            letter-spacing: 0.05em;
            line-height: 1.2;
        }

        .station-text p {
            font-family: 'Inter', sans-serif;
            font-size: 1.1rem;
            line-height: 1.8;
            color: rgba(255, 255, 255, 0.8);
            text-shadow: 0 2px 20px rgba(0, 0, 0, 0.8);
        }

        /* Portal/Navigation Buttons */
        .portal-container {
            position: absolute;
            bottom: 15%;
            display: flex;
            gap: 2rem;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
            pointer-events: auto;
        }

        .portal-container.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .portal {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(0, 245, 212, 0.2), rgba(0, 245, 212, 0.05));
            border: 1px solid rgba(0, 245, 212, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.5s ease;
            position: relative;
            backdrop-filter: blur(10px);
        }

        .portal::before {
            content: '';
            position: absolute;
            inset: -10px;
            border-radius: 50%;
            border: 1px solid rgba(0, 245, 212, 0.1);
            animation: portalPulse 3s ease-in-out infinite;
        }

        .portal:hover {
            transform: scale(1.1);
            background: radial-gradient(circle at 30% 30%, rgba(0, 245, 212, 0.3), rgba(0, 245, 212, 0.1));
            box-shadow: 0 0 60px rgba(0, 245, 212, 0.3);
        }

        @keyframes portalPulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.1); opacity: 0.2; }
        }

        .portal-label {
            font-size: 0.75rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: rgba(0, 245, 212, 0.8);
            text-align: center;
            padding: 0 1rem;
        }

        /* Progress Ring */
        #progress-ring {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            z-index: 20;
            overflow: hidden;
        }

        #progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #00f5d4, #00ffaa);
            transition: width 1s ease;
        }

        /* Navigation Hints */
        .nav-hint {
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.7rem;
            letter-spacing: 0.2em;
            text-transform: uppercase;
            z-index: 20;
        }

        /* Loading Screen */
        #loading {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 2rem;
        }

        #loading.hidden {
            opacity: 0;
            pointer-events: none;
            transition: opacity 1s ease;
        }

        .loading-ring {
            width: 80px;
            height: 80px;
            border: 2px solid rgba(0, 245, 212, 0.2);
            border-top-color: #00f5d4;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: rgba(0, 245, 212, 0.6);
            font-size: 0.8rem;
            letter-spacing: 0.3em;
        }

        /* Station indicators (dots) */
        #station-dots {
            position: fixed;
            right: 40px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 1rem;
            z-index: 20;
        }

        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transition: all 0.5s ease;
        }

        .dot.active {
            background: #00f5d4;
            box-shadow: 0 0 20px #00f5d4;
        }

        .dot.visited {
            background: rgba(0, 245, 212, 0.4);
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading">
        <div class="loading-ring"></div>
        <div class="loading-text">DIMENSIONEN LADEN...</div>
    </div>

    <!-- 3D Canvas -->
    <div id="canvas-container"></div>

    <!-- UI Layer -->
    <div id="ui-layer">
        <!-- Content will be dynamically inserted -->
    </div>

    <!-- Progress -->
    <div class="nav-hint">Wähle ein Portal</div>
    <div id="progress-ring">
        <div id="progress-fill"></div>
    </div>

    <!-- Station Dots -->
    <div id="station-dots"></div>

    <!-- Three.js -->
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>

    <script>
        // ==================================================================
        // ISONOMIA - IMMERSIVE JOURNEY
        // Eine 3D-Reise durch den Raum der Demokratie
        // ==================================================================

        const Journey = {
            scene: null,
            camera: null,
            renderer: null,
            currentStation: 0,
            isTransitioning: false,
            stations: [],
            tunnel: null,
            particles: null,
            targetPosition: new THREE.Vector3(0, 0, 0),
            
            // Station Data with 3D coordinates
            stationData: [
                {
                    id: 'awakening',
                    position: { x: 0, y: 0, z: 0 },
                    title: 'Das Erwachen',
                    text: 'Du stehst am Anfang. Vor dir liegt ein Pfad durch die Dimensionen der Demokratie. Wähle deine Richtung.',
                    color: 0x00f5d4,
                    portals: [
                        { label: 'System-Frust', target: 'system_chaos', color: 0xff6b9d },
                        { label: 'Machtlosigkeit', target: 'power_void', color: 0x00f5d4 },
                        { label: 'Zukunfts-Angst', target: 'fear_vortex', color: 0xffd700 }
                    ]
                },
                {
                    id: 'system_chaos',
                    position: { x: 0, y: 0, z: -100 },
                    title: 'Das Chaos des Systems',
                    text: 'Du siehst es jetzt. Das System funktioniert nicht zufällig schlecht - es ist so gebaut. Parteien. Karrieren. Kampagnen.',
                    color: 0xff6b9d,
                    portals: [
                        { label: 'Tiefer blicken', target: 'elite_pyramid', color: 0xffffff },
                        { label: 'Weg hier', target: 'solution_realm', color: 0x00f5d4 }
                    ]
                },
                {
                    id: 'power_void',
                    position: { x: 100, y: 0, z: -50 },
                    title: 'Die Leere der Ohnmacht',
                    text: 'Deine Stimme verschwindet im Nichts. Du wählst, aber du entscheidest nicht. Ein Gefühl, das Millionen teilen.',
                    color: 0x00f5d4,
                    portals: [
                        { label: 'Warum?', target: 'representation_lie', color: 0xff6b9d },
                        { label: 'Aufstehen', target: 'solution_realm', color: 0x00f5d4 }
                    ]
                },
                {
                    id: 'fear_vortex',
                    position: { x: -100, y: 0, z: -50 },
                    title: 'Der Strudel der Angst',
                    text: 'AfD. Klimakollaps. Krieg. Die Demokratie bröckelt. Aber was, wenn das System selbst die Krise schafft?',
                    color: 0xffd700,
                    portals: [
                        { label: 'Die Mechanik', target: 'election_trap', color: 0xff6b9d },
                        { label: 'Ausbruch', target: 'solution_realm', color: 0x00f5d4 }
                    ]
                },
                {
                    id: 'elite_pyramid',
                    position: { x: 0, y: 50, z: -200 },
                    title: 'Die Pyramide der Elite',
                    text: '87% Akademiker im Parlament. 20% in der Bevölkerung. Das ist keine Repräsentation. Das ist Klassenherrschaft mit Wahlzettel.',
                    color: 0xffffff,
                    portals: [
                        { label: 'Die Alternative', target: 'solution_realm', color: 0x00f5d4 }
                    ]
                },
                {
                    id: 'solution_realm',
                    position: { x: 0, y: 0, z: -300 },
                    title: 'Das Reich des Loses',
                    text: 'Athen. 200 Jahre. Keine Wahlen. 500 Bürger. Ausgelost. Ein Jahr. Dann zurück. Keine Parteien. Keine Karrieren. Wahre Repräsentation.',
                    color: 0x00f5d4,
                    portals: [
                        { label: 'Wie funktioniert es?', target: 'sortition_mechanism', color: 0x00f5d4 },
                        { label: 'Zweifel', target: 'objection_zone', color: 0xff6b9d }
                    ]
                },
                {
                    id: 'sortition_mechanism',
                    position: { x: 0, y: 0, z: -400 },
                    title: 'Die Mechanik',
                    text: 'Zufällige Auswahl. Ein Jahr Vorbereitung. Fachexperten beraten. 500 Entscheider. Konsens statt Mehrheit. Dann: Zurück zum Leben.',
                    color: 0x00f5d4,
                    portals: [
                        { label: 'Es funktioniert', target: 'modern_proof', color: 0x00f5d4 }
                    ]
                },
                {
                    id: 'modern_proof',
                    position: { x: 0, y: 0, z: -500 },
                    title: 'Der Beweis',
                    text: 'Irland 2016. Belgien. Frankreich. Kanada. Bürgerräte lösen, was Politiker nicht lösen konnten. Es ist keine Utopie. Es ist Realität.',
                    color: 0x00f5d4,
                    portals: [
                        { label: 'Handeln', target: 'action_nexus', color: 0xffd700 }
                    ]
                },
                {
                    id: 'action_nexus',
                    position: { x: 0, y: 0, z: -600 },
                    title: 'Der Nexus',
                    text: 'Du hast gesehen. Jetzt: Handle. Lokale Bürgerräte. Dialog mit AfD-Wählern. Politischen Druck aufbauen. Die Reise endet nicht hier.',
                    color: 0xffd700,
                    portals: [
                        { label: 'Lokale Räte', target: 'local_action', color: 0x00f5d4 },
                        { label: 'Dialog', target: 'dialog_path', color: 0x00f5d4 },
                        { label: 'Politik', target: 'political_action', color: 0x00f5d4 }
                    ]
                },
                {
                    id: 'local_action',
                    position: { x: 100, y: 0, z: -700 },
                    title: 'Lokale Räte',
                    text: 'Suche Bürgerräte in deiner Stadt. Klima. Verkehr. Wohnen. Zeige, dass es funktioniert. Ohne Parteien. Mit normalen Menschen.',
                    color: 0x00f5d4,
                    portals: [
                        { label: 'Neustart', target: 'awakening', color: 0xffffff }
                    ]
                },
                {
                    id: 'dialog_path',
                    position: { x: 0, y: 50, z: -700 },
                    title: 'Der Dialog',
                    text: 'Sprich mit AfD-Wählern. Nicht: Du bist böse. Sondern: Was stört dich? Höre zu. Erkläre Sortition. Ihre Stimme würde zählen.',
                    color: 0x00f5d4,
                    portals: [
                        { label: 'Neustart', target: 'awakening', color: 0xffffff }
                    ]
                },
                {
                    id: 'political_action',
                    position: { x: -100, y: 0, z: -700 },
                    title: 'Politische Arena',
                    text: 'Schreibe Abgeordnete. Unterstütze "Mehr Demokratie". Organisiere Unterschriften. Jede Stimme zählt. Auch deine.',
                    color: 0x00f5d4,
                    portals: [
                        { label: 'Neustart', target: 'awakening', color: 0xffffff }
                    ]
                }
            ],

            init() {
                this.createScene();
                this.createStations();
                this.createTunnel();
                this.createParticles();
                this.setupUI();
                this.animate();
                
                // Hide loading
                setTimeout(() => {
                    document.getElementById('loading').classList.add('hidden');
                    this.showStation(0);
                }, 2000);
            },

            createScene() {
                this.scene = new THREE.Scene();
                this.scene.fog = new THREE.FogExp2(0x000000, 0.002);

                this.camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
                this.camera.position.set(0, 0, 50);

                this.renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                this.renderer.setSize(window.innerWidth, window.innerHeight);
                this.renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
                document.getElementById('canvas-container').appendChild(this.renderer.domElement);

                window.addEventListener('resize', () => this.onResize());
            },

            createStations() {
                this.stationData.forEach((data, index) => {
                    const station = new THREE.Group();
                    station.position.set(data.position.x, data.position.y, data.position.z);

                    // Central orb
                    const geometry = new THREE.IcosahedronGeometry(10, 1);
                    const material = new THREE.MeshBasicMaterial({
                        color: data.color,
                        wireframe: true,
                        transparent: true,
                        opacity: 0.3
                    });
                    const orb = new THREE.Mesh(geometry, material);
                    
                    // Inner glow
                    const innerGeo = new THREE.IcosahedronGeometry(6, 0);
                    const innerMat = new THREE.MeshBasicMaterial({
                        color: data.color,
                        transparent: true,
                        opacity: 0.1
                    });
                    const inner = new THREE.Mesh(innerGeo, innerMat);
                    
                    station.add(orb);
                    station.add(inner);
                    
                    // Store references
                    station.userData = { 
                        id: data.id, 
                        index: index,
                        orb: orb,
                        inner: inner
                    };
                    
                    this.scene.add(station);
                    this.stations.push(station);
                });
            },

            createTunnel() {
                // Create connecting tunnel between stations
                const points = this.stationData.map(d => 
                    new THREE.Vector3(d.position.x, d.position.y, d.position.z)
                );
                
                const curve = new THREE.CatmullRomCurve3(points);
                const tubeGeo = new THREE.TubeGeometry(curve, 200, 2, 8, false);
                const tubeMat = new THREE.MeshBasicMaterial({
                    color: 0x00f5d4,
                    transparent: true,
                    opacity: 0.05,
                    wireframe: true
                });
                
                this.tunnel = new THREE.Mesh(tubeGeo, tubeMat);
                this.scene.add(this.tunnel);
            },

            createParticles() {
                const geometry = new THREE.BufferGeometry();
                const count = 5000;
                const positions = new Float32Array(count * 3);
                const colors = new Float32Array(count * 3);

                for (let i = 0; i < count * 3; i += 3) {
                    positions[i] = (Math.random() - 0.5) * 1000;
                    positions[i + 1] = (Math.random() - 0.5) * 1000;
                    positions[i + 2] = (Math.random() - 0.5) * 1000;

                    const color = new THREE.Color();
                    color.setHSL(Math.random() * 0.1 + 0.45, 0.8, 0.5);
                    colors[i] = color.r;
                    colors[i + 1] = color.g;
                    colors[i + 2] = color.b;
                }

                geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
                geometry.setAttribute('color', new THREE.BufferAttribute(colors, 3));

                const material = new THREE.PointsMaterial({
                    size: 2,
                    vertexColors: true,
                    transparent: true,
                    opacity: 0.6,
                    blending: THREE.AdditiveBlending
                });

                this.particles = new THREE.Points(geometry, material);
                this.scene.add(this.particles);
            },

            setupUI() {
                // Create station dots
                const dotsContainer = document.getElementById('station-dots');
                this.stationData.forEach((_, index) => {
                    const dot = document.createElement('div');
                    dot.className = 'dot';
                    dot.dataset.index = index;
                    dotsContainer.appendChild(dot);
                });

                // Update progress
                this.updateProgress();
            },

            showStation(index) {
                if (index < 0 || index >= this.stations.length) return;
                
                this.currentStation = index;
                const data = this.stationData[index];
                
                // Update UI
                this.updateUI(data);
                this.updateDots(index);
                this.updateProgress();

                // Camera target
                const station = this.stations[index];
                this.targetPosition.copy(station.position);
                
                // Add slight offset for dramatic effect
                this.targetPosition.z += 30;
            },

            updateUI(data) {
                const ui = document.getElementById('ui-layer');
                
                // Clear existing
                ui.innerHTML = '';
                
                // Create text container
                const textContainer = document.createElement('div');
                textContainer.className = 'station-text';
                textContainer.innerHTML = `
                    <h1 style="color: #${data.color.toString(16).padStart(6, '0')}">${data.title}</h1>
                    <p>${data.text}</p>
                `;
                ui.appendChild(textContainer);
                
                // Create portals
                if (data.portals) {
                    const portalContainer = document.createElement('div');
                    portalContainer.className = 'portal-container';
                    
                    data.portals.forEach(portal => {
                        const portalEl = document.createElement('div');
                        portalEl.className = 'portal';
                        portalEl.innerHTML = `<span class="portal-label">${portal.label}</span>`;
                        portalEl.style.borderColor = `#${portal.color.toString(16).padStart(6, '0')}50`;
                        portalEl.addEventListener('click', () => this.travelToStation(portal.target));
                        portalContainer.appendChild(portalEl);
                    });
                    
                    ui.appendChild(portalContainer);
                }
                
                // Animate in
                requestAnimationFrame(() => {
                    textContainer.classList.add('active');
                    const portals = ui.querySelector('.portal-container');
                    if (portals) portals.classList.add('visible');
                });
            },

            updateDots(index) {
                document.querySelectorAll('.dot').forEach((dot, i) => {
                    dot.classList.remove('active', 'visited');
                    if (i === index) dot.classList.add('active');
                    else if (i < index) dot.classList.add('visited');
                });
            },

            updateProgress() {
                const progress = ((this.currentStation + 1) / this.stations.length) * 100;
                document.getElementById('progress-fill').style.width = `${progress}%`;
            },

            travelToStation(stationId) {
                if (this.isTransitioning) return;
                
                const targetIndex = this.stationData.findIndex(s => s.id === stationId);
                if (targetIndex === -1) return;
                
                this.isTransitioning = true;
                
                // Hide UI
                const text = document.querySelector('.station-text');
                const portals = document.querySelector('.portal-container');
                if (text) text.classList.remove('active');
                if (portals) portals.classList.remove('visible');
                
                // Start transition after UI fades
                setTimeout(() => {
                    this.showStation(targetIndex);
                    this.isTransitioning = false;
                }, 1000);
            },

            animate() {
                requestAnimationFrame(() => this.animate());
                
                const time = Date.now() * 0.001;
                
                // Smooth camera movement
                this.camera.position.lerp(this.targetPosition, 0.02);
                this.camera.lookAt(this.stations[this.currentStation].position);
                
                // Animate stations
                this.stations.forEach((station, i) => {
                    const orb = station.userData.orb;
                    const inner = station.userData.inner;
                    
                    // Rotate
                    orb.rotation.x += 0.001;
                    orb.rotation.y += 0.002;
                    inner.rotation.x -= 0.002;
                    inner.rotation.y -= 0.001;
                    
                    // Pulse effect for current station
                    if (i === this.currentStation) {
                        const scale = 1 + Math.sin(time * 2) * 0.1;
                        orb.scale.setScalar(scale);
                        inner.scale.setScalar(scale * 0.8);
                    }
                });
                
                // Animate particles
                this.particles.rotation.y += 0.0002;
                this.particles.rotation.z += 0.0001;
                
                // Animate tunnel
                if (this.tunnel) {
                    this.tunnel.rotation.z += 0.0005;
                }
                
                this.renderer.render(this.scene, this.camera);
            },

            onResize() {
                this.camera.aspect = window.innerWidth / window.innerHeight;
                this.camera.updateProjectionMatrix();
                this.renderer.setSize(window.innerWidth, window.innerHeight);
            }
        };

        // Start journey
        Journey.init();
    </script>
</body>
</html>
